2020/12/07 11:01:54 [error] 56514#56514: *1041 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:54 [error] 56514#56514: *1039 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:54 [error] 56512#56512: *1044 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:55 [error] 56514#56514: *1039 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:55 [error] 56514#56514: *1041 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:55 [error] 56512#56512: *1043 lua entry thread aborted: runtime error: /usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: bad argument #1 to 'len' (string expected, got userdata)
stack traceback:
coroutine 0:
	[builtin:len]: in function 'len'
	/usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: in function 'writeString'
	/gen-lua/media_service_MovieInfoService.lua:186: in function 'write'
	/gen-lua/media_service_MovieInfoService.lua:543: in function 'send_WriteMovieInfo'
	/gen-lua/media_service_MovieInfoService.lua:525: in function 'WriteMovieInfo'
	...penresty/nginx/lua-scripts/wrk2-api/movie-info/write.lua:57: in function 'WriteMovieInfo'
	content_by_lua(nginx.conf:107):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:55 [error] 56514#56514: *1041 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:55 [error] 56512#56512: *1044 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56516#56516: *1042 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56512#56512: *1038 lua entry thread aborted: runtime error: unknown reason
stack traceback:
coroutine 0:
	[C]: in function 'error'
	/gen-lua/media_service_MovieIdService.lua:326: in function 'recv_RegisterMovieId'
	/gen-lua/media_service_MovieIdService.lua:299: in function 'RegisterMovieId'
	.../openresty/nginx/lua-scripts/wrk2-api/movie/register.lua:37: in function 'RegisterMovie'
	content_by_lua(nginx.conf:93):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie/register HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56516#56516: *1049 lua entry thread aborted: runtime error: /usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: bad argument #1 to 'len' (string expected, got userdata)
stack traceback:
coroutine 0:
	[builtin:len]: in function 'len'
	/usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: in function 'writeString'
	/gen-lua/media_service_MovieInfoService.lua:186: in function 'write'
	/gen-lua/media_service_MovieInfoService.lua:543: in function 'send_WriteMovieInfo'
	/gen-lua/media_service_MovieInfoService.lua:525: in function 'WriteMovieInfo'
	...penresty/nginx/lua-scripts/wrk2-api/movie-info/write.lua:57: in function 'WriteMovieInfo'
	content_by_lua(nginx.conf:107):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56512#56512: *1047 [lua] write.lua:27: WriteMovieInfo(): Empty body, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56514#56514: *1037 lua entry thread aborted: runtime error: unknown reason
stack traceback:
coroutine 0:
	[C]: in function 'error'
	/gen-lua/media_service_MovieIdService.lua:326: in function 'recv_RegisterMovieId'
	/gen-lua/media_service_MovieIdService.lua:299: in function 'RegisterMovieId'
	.../openresty/nginx/lua-scripts/wrk2-api/movie/register.lua:37: in function 'RegisterMovie'
	content_by_lua(nginx.conf:93):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie/register HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56512#56512: *1044 lua entry thread aborted: runtime error: unknown reason
stack traceback:
coroutine 0:
	[C]: in function 'error'
	/gen-lua/media_service_MovieIdService.lua:326: in function 'recv_RegisterMovieId'
	/gen-lua/media_service_MovieIdService.lua:299: in function 'RegisterMovieId'
	.../openresty/nginx/lua-scripts/wrk2-api/movie/register.lua:37: in function 'RegisterMovie'
	content_by_lua(nginx.conf:93):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie/register HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56514#56514: *1039 lua entry thread aborted: runtime error: unknown reason
stack traceback:
coroutine 0:
	[C]: in function 'error'
	/gen-lua/media_service_MovieIdService.lua:326: in function 'recv_RegisterMovieId'
	/gen-lua/media_service_MovieIdService.lua:299: in function 'RegisterMovieId'
	.../openresty/nginx/lua-scripts/wrk2-api/movie/register.lua:37: in function 'RegisterMovie'
	content_by_lua(nginx.conf:93):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie/register HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56514#56514: *1050 lua entry thread aborted: runtime error: unknown reason
stack traceback:
coroutine 0:
	[C]: in function 'error'
	/gen-lua/media_service_MovieIdService.lua:326: in function 'recv_RegisterMovieId'
	/gen-lua/media_service_MovieIdService.lua:299: in function 'RegisterMovieId'
	.../openresty/nginx/lua-scripts/wrk2-api/movie/register.lua:37: in function 'RegisterMovie'
	content_by_lua(nginx.conf:93):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie/register HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:01:56 [error] 56512#56512: *1053 lua entry thread aborted: runtime error: /usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: bad argument #1 to 'len' (string expected, got userdata)
stack traceback:
coroutine 0:
	[builtin:len]: in function 'len'
	/usr/local/openresty/lualib/thrift/TBinaryProtocol.lua:135: in function 'writeString'
	/gen-lua/media_service_MovieInfoService.lua:186: in function 'write'
	/gen-lua/media_service_MovieInfoService.lua:543: in function 'send_WriteMovieInfo'
	/gen-lua/media_service_MovieInfoService.lua:525: in function 'WriteMovieInfo'
	...penresty/nginx/lua-scripts/wrk2-api/movie-info/write.lua:57: in function 'WriteMovieInfo'
	content_by_lua(nginx.conf:107):3: in main chunk, client: 10.0.0.5, server: localhost, request: "POST /wrk2-api/movie-info/write HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:02:07 [error] 56515#56515: *1108 [lua] compose.lua:55: Upload movie_id failed: E11000 duplicate key error collection: movie-review.movie-review index: movie_id_1 dup key: { movie_id: "8879" }, client: 10.0.0.5, server: localhost, request: "POST http://127.0.0.1:8080/wrk2-api/review/compose HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
2020/12/07 11:02:08 [error] 56516#56516: *1104 [lua] compose.lua:55: Upload movie_id failed: E11000 duplicate key error collection: user-review.user-review index: user_id_1 dup key: { user_id: 8849952451133636608 }, client: 10.0.0.5, server: localhost, request: "POST http://127.0.0.1:8080/wrk2-api/review/compose HTTP/1.1", host: "ip-172-31-10-2.us-east-2.compute.internal:8080"
